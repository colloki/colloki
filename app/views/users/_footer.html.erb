<script>
  <% if user %>
  $(document).ready(function(e) {
    var userPosts = new window.StoryListView({
      el: $(".user-posts"),
      current_user: <%= current_user.to_json.html_safe %>,
      postedBy: <%= user.id %>,
      emptyMessage: "No posts written yet."
    });

    var likedPosts = new window.StoryListView({
      el: $(".user-likes"),
      current_user: <%= current_user.to_json.html_safe %>,
      likedBy: <%= user.id %>,
      emptyMessage: "No stories liked yet."
    });

    $(".posts-tab-link").click(function(e) {
      userPosts.render();
    });

    $(".likes-tab-link").click(function(e) {
      likedPosts.render();
    });
  });
  <% end %>
</script>
